---
title: "è·¯ç·šãƒ»é§…ãƒ‡ãƒ¼ã‚¿ã®APIã‚µãƒ¼ãƒ“ã‚¹ã‚’Ruby on Rails 7 + Tailwind CSSã§æ§‹ç¯‰ã—ã¾ã—ãŸ"
emoji: "ğŸšƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [rails, OpenAPI,ã€€RubyOnRails, TailwindCSS, DaisyUI]
published: false
---

# æ¦‚è¦

- Ruby on Rails 7ã‹ã‚‰Tailwind CSSãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚
- RailsãŒå…¬å¼ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ã‚‰ã«ã¯ã•ãã‹ã—è‰¯ã„ã‚‚ã®ã ã‚ã†ã¨æ€ã†ã®ã§ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã€ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¦ã‚£ãƒ¼ã‚¯ã®1æ—¥ã‚’ä½¿ã£ã¦æ§‹ç¯‰ã—ã¦ã¿ã¾ã—ãŸã€‚
- [è·¯ç·šãƒ»é§…ãƒ‡ãƒ¼ã‚¿ã®API](https://train.teraren.com/)


# ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

ã¾ãšã¯æˆæœç‰©ã®ç´¹ä»‹ã§ã™ã€‚

## ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸

![train.teraren.com](https://storage.googleapis.com/zenn-user-upload/de390ab86035-20220527.png)


## APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

![é§…æƒ…å ± REST API](https://storage.googleapis.com/zenn-user-upload/42d0f2ccf3cf-20220527.png)

## ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚µãƒ³ãƒ—ãƒ«

å±±æ‰‹ç·šã®é§…åã¨ç·¯åº¦çµŒåº¦ã‚’å–å¾—ã™ã‚‹ä¾‹

```
% curl -s  https://train.teraren.com/lines/11302/stations.json | jq -r '.[] | [.station_name, .lat, .lon]'
[
  "å¤§å´",
  "35.619772",
  "139.728439"
]
[
  "äº”åç”°",
  "35.625974",
  "139.723822"
]
[
  "ç›®é»’",
  "35.633923",
  "139.715775"
]
[
  "æµæ¯”å¯¿",
  "35.646685",
  "139.71007"
]
[
  "æ¸‹è°·",
  "35.658871",
  "139.701238"
]
```


# ãªãœé§…ãƒ»è·¯ç·šã®APIã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã£ãŸã®ã‹ï¼Ÿ

- [é§…ãƒ‡ãƒ¼ã‚¿](https://ekidata.jp/)ã®ã‚µã‚¤ãƒˆã«ã¦10å¹´ä»¥ä¸Šå‰ã‹ã‚‰è·¯ç·šã¨é§…ã®ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒCSVãƒ•ã‚¡ã‚¤ãƒ«ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
- ä¸Šè¨˜ã®ã‚µã‚¤ãƒˆã«ã¦APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãŸã‚ˆã†ã§ã™ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
- é¡ä¼¼ã‚µãƒ¼ãƒ“ã‚¹ã¯æ§˜ã€…ãªä¼šç¤¾ãŒæä¾›ã—ã¦ã„ã¾ã™ãŒã€ç„¡æ–™ã§ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ãªã—ã«ç°¡å˜ã«åˆ©ç”¨ã§ãã‚‹APIãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
- é§…ãƒ‡ãƒ¼ã‚¿ã®ãƒã‚¹ã‚¿æƒ…å ±ã¯ã€é‹å–¶å…ƒã®æ–¹ãŒã‚ªãƒ¼ãƒ—ãƒ³ãªãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’é©ç”¨ã—ã¦ãã ã•ã£ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’æœ‰åŠ¹æ´»ç”¨ã—ãŸã‹ã£ãŸã€‚

# ä½œæ¥­ã®æµã‚Œã¨ä½¿ã£ãŸæ™‚é–“

- ekidataã®ãƒã‚¹ã‚¿æƒ…å ±ã®å­¦ç¿’: 1h
- Tailwind CSSã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«: 1h
- é–‹ç™ºç’°å¢ƒæ§‹ç¯‰: 2h
  - `rails new . -c tailwind`
  - docker-composeè¨­å®š
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ é–‹ç™º: 6h
  - modelä½œæˆ
  - migrationsä½œæˆ
  - i18n
- [daisyUIã®å­¦ç¿’](https://daisyui.com/): 1h
- UIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°: 4h
- Lighthouseç”¨ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°: 1h
- [OpenAPI Specification 3](https://swagger.io/specification/)å½¢å¼ã§ã®APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ: 1h
- ã‚µãƒ¼ãƒè¨­å®š: 1h

# Railsã®ä¸»ãªè¨­å®š

## è¿½åŠ ã—ãŸgem


```
gem 'rails-i18n', '~> 7.0.0'
gem 'kaminari'
gem 'sitemap_generator'
gem "meta-tags"
gem "rack-cors"
gem "google-tag-manager-rails", "~> 0.1.3"
gem "gretel", "~> 4.4"
gem "geocoder", "~> 1.8"

# for dev and test
gem 'rubocop', '~> 1.28'
gem 'openapi3_parser'
gem 'openapi_parser'
gem 'annotate'

gem 'rspec-rails'
gem 'capybara-screenshot'
```

## tailwindã®è¨­å®š

`config/tailwind.config.js`
```
const defaultTheme = require('tailwindcss/defaultTheme')

module.exports = {
  content: [
    './app/helpers/**/*.rb',
    './app/javascript/**/*.js',
    './app/views/**/*.{erb,haml,html,slim}'
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter var', ...defaultTheme.fontFamily.sans],
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/aspect-ratio'),
    require('@tailwindcss/typography'),
    require('daisyui'),
  ],
  daisyui: {
    styled: true,
    themes: true,
    base: true,
    utils: true,
    logs: true,
    rtl: false,
    prefix: "",
    darkTheme: "dark",
  },
}
```

# å·¥å¤«ã—ãŸç‚¹

- Lighthouseã®ã‚¹ã‚³ã‚¢ãŒå¤§ããªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãªã—ã«95ç‚¹ã‚’å‡ºã›ã¾ã—ãŸã€‚

![lighthouse](https://storage.googleapis.com/zenn-user-upload/58429e477edc-20220527.png)
# æ„Ÿæƒ³

- Tailwind CSSã ã‘ã§ã¯ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªUIãƒ©ã‚¤ãƒ–ãƒ©ãƒªé›†ãªã®ã§ã€Tailwind CSSã ã‘ã‚’ä½¿ã£ã¦ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ã®ã¯ã‹ãªã‚Šå¤§å¤‰ã§ã™ã€‚
- [daisyUI](https://daisyui.com/)ã‚’ä½¿ã„ã¾ã—ãŸã€‚
  - Twitter Bootstrapã¯Tailwind CSS + ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãã“ãã“è¦‹æ „ãˆã®è‰¯ã„ã‚¢ã‚»ãƒƒãƒˆãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã«å¯¾ã—ã¦Tailwindã§ã¯åˆ†å‰²ã•ã‚Œã¦ã„ã¾ã™ã€‚

Tailwindã ã‘ã ã¨ã€å·¦ã®ã‚ˆã†ã«æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã®ã§ã™ãŒå³ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚daisyUIã¯ã“ã®ã‚ˆã†ã«Tailwindã®1æ®µéšä¸Šä½ã§æä¾›ã•ã‚Œã¦ã„ã‚‹UIã®ã‚¢ã‚»ãƒƒãƒˆé›†ã¨ã„ã†ä½ç½®ã¥ã‘ã§ã™ã€‚ãã®çµæœã€Twitter Bootstrapã¨åŒã˜ã‚ˆã†ãªDSLã§UIã‚’ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã§ãã¾ã™ã€‚

![daisyUI](https://storage.googleapis.com/zenn-user-upload/4ff9c8e11a84-20220527.png)

- TailwindãŒnodeã«ä¾å­˜ã—ã¦ã„ãªã„ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å…¨ä½“çš„ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€Ÿãã¦è‰¯ã„ã§ã™ã€‚
- ãƒšãƒ¼ã‚¸å†…ã§ä½¿ã£ã¦ã„ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã—ã‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œãªã„ã®ã§ã€å¿…è¦æœ€ä½é™ã®CSSãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã®ã§ãƒ•ã‚¡ã‚¤ãƒ«å®¹é‡ãŒå°‘ãªãã¦è‰¯ã„ã§ã™ã€‚
- DSL (Domain-Specific Language) ãŒ1ã¤å¢—ãˆã‚‹ã®ã¯è¾›ã„ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€daisyUIã®ãŠã‹ã’ã§è¦šãˆã‚‹é …ç›®ã¯ã»ã¨ã‚“ã©ç„¡ã„ã§ã™ã€‚


# ã¾ã¨ã‚

- UIãŒã§ããªã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚‚è‰¯ã„æ„Ÿã˜ã®UIã‚’ä½œã‚Œã¾ã—ãŸã€‚
- ä»Šã¯åŸºæœ¬çš„ãªAPIã—ã‹ä½œã£ã¦ã„ã¾ã›ã‚“ãŒã€ã‚‚ã£ã¨ä¾¿åˆ©ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®APIã‚’å¢—ã‚„ã—ã¦ã„ãã¾ã™ã€‚
- ãã®ã†ã¡ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ç·¨ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚

